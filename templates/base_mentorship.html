{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unity Circles - {% block title %}Connect & Grow{% endblock %}</title>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Mentorship Design System Fonts -->
    <!-- Manrope: Body & UI - confident without shouting -->
    <!-- Comfortaa: Headings & brand - calm authority, no sharp edges -->
    <!-- Fredoka: Actions & emphasis - warm encouragement -->
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Comfortaa:wght@500;600;700&family=Fredoka:wght@500;600;700&display=swap" rel="stylesheet">
    
    <!-- Mentorship Design System CSS -->
    <link rel="stylesheet" href="{% static 'css/styles_mentorship.css' %}">

    {% block extra_css %}{% endblock %}
</head>

<body>

<!-- Django Messages -->
{% if messages %}
<div style="position: fixed; top: 80px; right: 20px; z-index: 9999; max-width: 400px;">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}" id="message-{{ forloop.counter }}">
        {% if message.tags == 'success' %}
        <i data-lucide="check-circle" style="width: 20px; height: 20px;"></i>
        {% elif message.tags == 'error' %}
        <i data-lucide="alert-circle" style="width: 20px; height: 20px;"></i>
        {% elif message.tags == 'warning' %}
        <i data-lucide="alert-triangle" style="width: 20px; height: 20px;"></i>
        {% else %}
        <i data-lucide="info" style="width: 20px; height: 20px;"></i>
        {% endif %}
        <span>{{ message }}</span>
    </div>
    {% endfor %}
</div>
{% endif %}

<nav class="navbar">
    <div class="container nav-content">
        <a href="/" class="nav-logo">
            <i data-lucide="circles" style="width: 24px; height: 24px;"></i>
            <span>Unity Circles</span>
        </a>

        <button id="mobile-menu-toggle" class="mobile-menu-btn">
            <i data-lucide="menu" style="width: 24px; height: 24px;"></i>
        </button>

        <div class="nav-links" id="nav-links-container">
            {% if user.is_authenticated %}
                <a href="/dashboard/" class="nav-link">Dashboard</a>
                <a href="/mentors/" class="nav-link">Mentors</a>
                <a href="/communities/" class="nav-link">Communities</a>
                <a href="/meetings/" class="nav-link">Meetings</a>
                <a href="/chat/" class="nav-link">Messages</a>

                <div style="margin-left: auto; display: flex; align-items: center; gap: 1.5rem;">
                    <a href="/profile/" class="avatar" title="Profile">
                        <span>{{ user.username|first|upper }}</span>
                    </a>

                    <a href="/logout/" class="nav-link" style="display: flex; align-items: center; gap: 0.5rem;">
                        <i data-lucide="log-out" style="width:18px; height: 18px;"></i>
                        Logout
                    </a>
                </div>
            {% else %}
                <div style="margin-left: auto; display: flex; align-items: center; gap: 1rem;">
                    <a href="/login/" class="btn btn-ghost">Sign in</a>
                    <a href="/signup/" class="btn btn-primary">Get started</a>
                </div>
            {% endif %}
        </div>
    </div>
</nav>

<main>
    {% block content %}{% endblock %}
</main>

<script>
    // Auto-dismiss messages after 5 seconds
    setTimeout(() => {
        const messages = document.querySelectorAll('.alert');
        messages.forEach(msg => {
            msg.style.transition = 'all 0.3s ease-out';
            msg.style.opacity = '0';
            msg.style.transform = 'translateX(400px)';
            setTimeout(() => msg.remove(), 300);
        });
    }, 5000);

    // Mobile menu toggle
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const navLinksContainer = document.getElementById('nav-links-container');
    
    if (mobileMenuToggle) {
        mobileMenuToggle.addEventListener('click', () => {
            navLinksContainer.classList.toggle('active');
        });
    }

    // Initialize Lucide icons
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
</script>

{% block extra_js %}{% endblock %}

</body>
</html>
